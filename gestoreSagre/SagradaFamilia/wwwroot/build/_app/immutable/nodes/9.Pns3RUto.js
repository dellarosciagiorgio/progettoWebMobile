import{t as S,a as q,b as be}from"../chunks/C3LzQ5sL.js";import"../chunks/Cf1npzb8.js";import{a9 as se,aa as ge,p as _e,a as he,a0 as t,e as a,m as u,a2 as i,a1 as l,a3 as C,ab as we,n as c,s as o}from"../chunks/TWVgqK11.js";import{l as xe,i as G,e as ye,s as K}from"../chunks/BZQWxGEs.js";import{r as R}from"../chunks/BS78Nl50.js";import{b as P,a as ke,p as ze}from"../chunks/CQv9zxpj.js";import{i as qe}from"../chunks/B6UNWQNk.js";import{o as Re}from"../chunks/8FTZ2a1S.js";/* empty css                */function le(e,v,s){if(e.multiple)return Te(e,v);for(var d of e.options){var n=T(d);if(ge(n,v)){d.selected=!0;return}}(!s||v!==void 0)&&(e.selectedIndex=-1)}function Ie(e,v){se(()=>{var s=new MutationObserver(()=>{var d=e.__value;le(e,d)});return s.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{s.disconnect()}})}function Pe(e,v,s=v){var d=!0;xe(e,"change",n=>{var m=n?"[selected]":":checked",_;if(e.multiple)_=[].map.call(e.querySelectorAll(m),T);else{var h=e.querySelector(m)??e.querySelector("option:not([disabled])");_=h&&T(h)}s(_)}),se(()=>{var n=v();if(le(e,n,d),d&&n===void 0){var m=e.querySelector(":checked");m!==null&&(n=T(m),s(n))}e.__value=n,d=!1}),Ie(e)}function Te(e,v){for(var s of e.options)s.selected=~v.indexOf(T(s))}function T(e){return"__value"in e?e.__value:e.value}var Se=S('<div class="alert alert-danger mb-4" role="alert"> </div>'),Le=S('<span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span> Registrazione in corso...',1),Ae=S('<div class="card border-0 shadow-lg rounded-4 overflow-hidden"><div class="card-header text-white p-0"><div class="text-center py-4 header-gradient"><h3 class="mb-0 fw-bold">Sagre Italiane</h3> <p class="mb-0">Scopri e organizza eventi gastronomici</p></div></div> <div class="card-body p-4 p-md-5"><div class="text-center mb-4"><div class="mb-3 position-relative d-inline-block"><img src="/logo.png" alt="Logo" class="img-fluid logo-image"> <div class="logo-background"></div></div> <h4 class="fw-bold text-dark mb-1">Crea il tuo account</h4> <p class="text-muted mb-4">Inserisci i tuoi dati per registrarti</p></div> <!> <form><div class="form-floating mb-4"><select class="form-select border-0 bg-light form-input-shadow" id="role"><option>Acquirente</option><option>Organizzatore</option></select> <label for="role" class="text-muted">Registrati come</label></div> <div class="row g-3 mb-3"><div class="col-md-6"><div class="form-floating"><input type="text" class="form-control border-0 bg-light form-input-shadow" id="nome" placeholder="Nome" required> <label for="nome" class="text-muted">Nome</label></div></div> <div class="col-md-6"><div class="form-floating"><input type="text" class="form-control border-0 bg-light form-input-shadow" id="cognome" placeholder="Cognome" required> <label for="cognome" class="text-muted">Cognome</label></div></div></div> <div class="form-floating mb-3"><input type="email" class="form-control border-0 bg-light form-input-shadow" id="email" placeholder="nome@esempio.com" required> <label for="email" class="text-muted">Email</label></div> <div class="form-floating mb-3"><input type="password" class="form-control border-0 bg-light form-input-shadow" id="password" placeholder="Password" required> <label for="password" class="text-muted">Password (minimo 8 caratteri)</label></div> <div class="form-floating mb-4"><input type="password" class="form-control border-0 bg-light form-input-shadow" id="confermaPassword" placeholder="Conferma Password" required> <label for="confermaPassword" class="text-muted">Conferma Password</label></div> <div class="form-check mb-4"><input class="form-check-input" type="checkbox" id="accettoTermini" required> <label class="form-check-label text-muted" for="accettoTermini">Accetto i <a class="btn btn-link text-decoration-none p-0" href="/Registrazione/TermsAndPolicy">Termini e Condizioni</a> e la <a class="btn btn-link text-decoration-none p-0" href="/Registrazione/TermsAndPolicy">Privacy Policy</a></label></div> <button type="submit" class="btn btn-lg w-100 text-white mb-4 py-3 register-button"><!></button></form> <div class="d-flex align-items-center my-4"><div class="flex-grow-1 border-bottom"></div> <div class="px-3 text-muted small">oppure</div> <div class="flex-grow-1 border-bottom"></div></div> <div class="text-center"><p class="mb-0">Hai già un account?</p> <a class="btn btn-link text-decoration-none p-0" href="/LogIn">Accedi ora</a></div></div> <div class="card-footer bg-white text-center p-3 border-0"><p class="text-muted small mb-0">© 2025 Sagre Italiane - Tutti i diritti riservati</p></div></div>'),Ce=S('<div class="card border-0 shadow-lg rounded-4 overflow-hidden success-card"><div class="card-body p-5 text-center"><div class="success-icon-wrapper mb-4"><i class="bi bi-check-circle-fill success-icon"></i></div> <h3 class="fw-bold mb-3">Registrazione completata!</h3> <p class="mb-4"> </p> <p class="text-muted mb-4">Verrai reindirizzato alla pagina di login tra <span class="fw-bold"> </span> secondi...</p> <a class="btn btn-lg login-now-button" href="/LogIn">Accedi ora</a></div></div>'),Oe=S('<div class="container-fluid min-vh-100 d-flex align-items-center justify-content-center registration-background"><div class="row w-100 justify-content-center"><div class="col-md-8 col-lg-7 col-xl-6"><!></div></div></div>');function je(e,v){_e(v,!1);let s=u(""),d=u(""),n=u(""),m=u(""),_=u(""),h=u("acquirente"),O=u(!1),y=u(!1),Q=u(!1),w=u(""),L=u(3),A;const ne=async()=>{if(o(w,""),o(y,!0),a(m).length<8){o(w,"La password deve essere di almeno 8 caratteri!"),o(y,!1);return}if(a(m)!==a(_)){o(w,"Le password non coincidono!"),o(y,!1);return}const f={nome:a(s),cognome:a(d),email:a(n),password:a(m),selectedRole:a(h),accettoTermini:a(O)};try{const b=await fetch("https://localhost:443/api/acquirente",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)}),g=await b.json();b.ok?(o(Q,!0),A=setInterval(()=>{o(L,a(L)-1),a(L)<=0&&(clearInterval(A),window.location.href="/LogIn")},1e3)):o(w,g.message||"Registrazione fallita. Riprova.")}catch(p){o(w,"Errore di connessione. Riprova più tardi."),console.error("Errore durante la registrazione:",p)}finally{o(y,!1)}};Re(()=>()=>{A&&clearInterval(A)}),qe();var j=Oe(),U=t(j),W=t(U),de=t(W);{var ce=f=>{var p=Ae(),b=l(t(p),2),g=l(t(b),2);{var E=r=>{var x=Se(),fe=t(x,!0);i(x),C(()=>K(fe,a(w))),q(r,x)};G(g,r=>{a(w)&&r(E)})}var k=l(g,2),z=t(k),I=t(z);C(()=>{a(h),we(()=>{})});var M=t(I);M.value=M.__value="acquirente";var X=l(M);X.value=X.__value="organizzatore",i(I),c(2),i(z);var N=l(z,2),D=t(N),Y=t(D),Z=t(Y);R(Z),c(2),i(Y),i(D);var $=l(D,2),ee=t($),ae=t(ee);R(ae),c(2),i(ee),i($),i(N);var J=l(N,2),re=t(J);R(re),c(2),i(J);var B=l(J,2),te=t(B);R(te),c(2),i(B);var F=l(B,2),ie=t(F);R(ie),c(2),i(F);var H=l(F,2),oe=t(H);R(oe),c(2),i(H);var V=l(H,2),me=t(V);{var ue=r=>{var x=Le();c(),q(r,x)},pe=r=>{var x=be("Registrati");q(r,x)};G(me,r=>{a(y)?r(ue):r(pe,!1)})}i(V),i(k),c(4),i(b),c(2),i(p),C(()=>V.disabled=a(y)),Pe(I,()=>a(h),r=>o(h,r)),P(Z,()=>a(s),r=>o(s,r)),P(ae,()=>a(d),r=>o(d,r)),P(re,()=>a(n),r=>o(n,r)),P(te,()=>a(m),r=>o(m,r)),P(ie,()=>a(_),r=>o(_,r)),ke(oe,()=>a(O),r=>o(O,r)),ye("submit",k,ze(ne)),q(f,p)},ve=f=>{var p=Ce(),b=t(p),g=l(t(b),4),E=t(g);i(g);var k=l(g,2),z=l(t(k)),I=t(z,!0);i(z),c(),i(k),c(2),i(b),i(p),C(()=>{K(E,`Benvenuto, ${a(s)??""}! Il tuo account è stato creato con successo.`),K(I,a(L))}),q(f,p)};G(de,f=>{a(Q)?f(ve,!1):f(ce)})}i(W),i(U),i(j),q(e,j),he()}function Ge(e){je(e,{})}export{Ge as component};
