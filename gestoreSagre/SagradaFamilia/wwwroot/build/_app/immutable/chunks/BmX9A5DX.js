import{t as i,a as t}from"./C3LzQ5sL.js";import"./Cf1npzb8.js";import{h as Y,p as xa,a as wa,a1 as p,a0 as s,s as V,m as w,e as a,a8 as g,a2 as e,a3 as A,a6 as Z,n as Ea}from"./TWVgqK11.js";import{i as f,s as C,e as S}from"./BZQWxGEs.js";import{e as ka,i as za}from"./B7YXE8lP.js";import{s as Na}from"./BS78Nl50.js";import{t as ja}from"./Bu93Vllf.js";import{i as Da}from"./B6UNWQNk.js";import{o as La}from"./8FTZ2a1S.js";/* empty css        */import{g as $}from"./BeMSFZTw.js";function Va(m,E,k,j){var u=m.__style;if(Y||u!==E){var o=ja(E);(!Y||o!==m.getAttribute("style"))&&(o==null?m.removeAttribute("style"):m.style.cssText=o),m.__style=E}return j}var Aa=i('<div class="d-flex justify-content-center my-5"><div class="spinner-border spinner-loading" role="status"><span class="visually-hidden">Caricamento...</span></div></div>'),Ca=i('<div class="alert alert-danger text-center shadow-sm rounded-3" role="alert"><i class="bi bi-exclamation-triangle-fill me-2"></i> </div>'),Ia=i('<div class="text-center py-5"><div class="mb-4"><i class="bi bi-calendar-x empty-icon"></i></div> <h4 class="text-muted">Nessuna sagra disponibile</h4> <p class="text-muted">Non ci sono sagre registrate al momento.</p></div>'),Ma=i('<div class="d-flex justify-content-center my-3">Paolo <div class="spinner-border spinner-border-sm text-warning" role="status"><span class="visually-hidden">Caricamento...</span></div></div>'),Pa=i('<span class="rating-big-number"> </span> <span class="rating-scale">/10</span>',1),Ra=i('<span class="rating-big-number">N/D</span>'),Ta=i('<div class="text-center mb-2">Valutazione</div> <div class="rating-value-container"><!></div> <div class="rating-bar-container"><div class="rating-bar"></div></div>',1),qa=i('<div class="rating-section mb-4"><!></div>'),Ba=i('<button class="btn rounded-pill valutazione-btn">Valutazione</button>'),Fa=i('<button class="btn rounded-pill nascondi-btn">Nascondi</button>'),Ga=i('<div class="col"><div class="card border-0 shadow-sm rounded-4 overflow-hidden hover-scale"><div class="position-relative"><img src="/imgs/sagra.jpg" class="card-img-top sagra-image" alt="Immagine della sagra"> <div class="image-overlay"><h5 class="card-title fw-bold text-white mb-0"> </h5></div></div> <div class="card-body p-4"><p class="card-text text-muted mb-4"> </p> <!> <div class="d-flex justify-content-center gap-2"><!> <a class="btn rounded-pill eventi-btn">Eventi</a></div></div></div></div>'),Ha=i('<div class="row row-cols-1 row-cols-sm-2 row-cols-lg-3 g-4"></div>'),Ja=i('<div class="container-fluid py-5 page-background"><div class="container"><div class="row justify-content-center mb-5"><div class="col-lg-8 text-center"><h2 class="fw-bold mb-3 title-color">Le Nostre Sagre</h2> <p class="text-muted">Scopri tutte le sagre disponibili</p> <div class="d-inline-block position-relative mb-4"><div class="logo-background"></div> <img src="/logo.png" alt="Logo" class="img-fluid logo-image"></div></div></div> <!></div></div>');function rr(m,E){xa(E,!1);let k=w([]),j=w(!0),u=w(""),o=w({}),v=w({}),b=w({});La(async()=>{try{let r=await $("sagre");r?(console.log(V(k,r.data)),a(k).forEach(n=>{g(o,a(o)[n.sagra.idSagra]=!1)})):V(u,"Errore nel recupero dei dati.")}catch(r){console.error("Errore:",r),V(u,"Errore nel recupero dei dati.")}finally{V(j,!1)}});async function B(r){if(g(o,a(o)[r]=!a(o)[r]),a(o)[r]&&!a(v)[r]){g(b,a(b)[r]=!0);try{let n=await $(`sagra/ratingbyid/${r}`);n?g(v,a(v)[r]=n.data):g(v,a(v)[r]="N/D")}catch(n){console.error("Errore nel recupero della valutazione:",n),g(v,a(v)[r]="Errore")}finally{g(b,a(b)[r]=!1)}}}Da();var I=Ja(),F=s(I),aa=p(s(F),2);{var ra=r=>{var n=Aa();t(r,n)},ea=(r,n)=>{{var sa=_=>{var z=Ca(),M=p(s(z));e(z),A(()=>C(M,` ${a(u)??""}`)),t(_,z)},ta=(_,z)=>{{var M=h=>{var N=Ia();t(h,N)},ia=h=>{var N=Ha();ka(N,5,()=>a(k),za,(oa,l)=>{var P=Ga(),G=s(P),R=s(G),H=p(s(R),2),J=s(H),la=s(J,!0);e(J),e(H),e(R);var K=p(R,2),T=s(K),va=s(T,!0);e(T);var O=p(T,2);{var na=d=>{var c=qa(),ma=s(c);{var ga=y=>{var D=Ma();t(y,D)},fa=y=>{var D=Ta(),q=p(Z(D),2),ua=s(q);{var ba=x=>{var L=Pa(),X=Z(L),ya=s(X,!0);e(X),Ea(2),A(()=>C(ya,a(v)[a(l).sagra.idSagra])),t(x,L)},_a=x=>{var L=Ra();t(x,L)};f(ua,x=>{a(v)[a(l).sagra.idSagra]>0?x(ba):x(_a,!1)})}e(q);var W=p(q,2),ha=s(W);e(W),A(()=>Va(ha,`width: ${a(v)[a(l).sagra.idSagra]*10}%`)),t(y,D)};f(ma,y=>{a(b)&&a(b)[a(l).sagra.idSagra]?y(ga):y(fa,!1)})}e(c),t(d,c)};f(O,d=>{a(o)[a(l).sagra.idSagra]&&d(na)})}var Q=p(O,2),U=s(Q);{var da=d=>{var c=Ba();S("click",c,()=>B(a(l).sagra.idSagra)),t(d,c)},ca=d=>{var c=Fa();S("click",c,()=>B(a(l).sagra.idSagra)),t(d,c)};f(U,d=>{a(o)[a(l).sagra.idSagra]?d(ca,!1):d(da)})}var pa=p(U,2);e(Q),e(K),e(G),e(P),A(()=>{C(la,a(l).sagra.nomeSagra),C(va,a(l).sagra.descrizione),Na(pa,"href",`/Sagre/Sagra?id=${a(l).sagra.idSagra??""}`)}),t(oa,P)}),e(N),t(h,N)};f(_,h=>{a(k).length===0?h(M):h(ia,!1)},z)}};f(r,_=>{a(u)?_(sa):_(ta,!1)},n)}};f(aa,r=>{a(j)?r(ra):r(ea,!1)})}e(F),e(I),t(m,I),wa()}export{rr as S};
